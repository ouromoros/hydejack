---
layout: post
title: Git简略笔记
tags: Git 技术
---

目前一直都是自己一个人写项目，但是最终肯定是无法避免git的使用的，因此整理了一下常用的命令和一些容易犯迷糊的地方，以便自己以后要用到时能更有效率地回忆起来，也发到这里供参考。

## 新建项目


创建一个新的repositary只需要建立一个文件夹然后输入:

~~~
git init
~~~

复制网上的repositary则是:

~~~
git clone <项目的地址>
~~~

## 关于git的add与commit

顾名思义add就是将改动的文件加入到这次的改动之中，而commit更类似于一个确认的过程，所以commit的时候才需要对更改的描述。而在commit之前如果想要重置自己这次的改动的话都可以用`git reset --hard HEAD`，将状态重置到上一个commit的状态。

add和commit都是在本地进行的，在push之前这些改动都还有余地撤销，如果代码出了什么问题（e.g. 思路出错）的话，这时还可以使用`git reset --hard  <commit id前十位>`来撤销更改而对远程仓库来做更改。

**注意**：如果是多人的项目的话随意reset到之前已经push过的版本之前再push的话会有灾难性的后果，因为网站上之前的commit的信息都被消除了，而其他人本地还保留着那些commit信息，这就会造成冲突。为了避免这样的情况最好使用`git reverse`，并且详细描写这个改动的信息。

## push、pull与branch

如果是项目一开始就是clone到的话可以直接使用push提交改动(在新的commit之后):

```
git push origin master
```

否则便要将项目添加到服务器上:

```
git remote add orgin <server>
```

转到一个branch或者建造（build）一个新的branch的代码如下：

```
git checkout <branch>
git checkout -b <new-branch>
```

获取服务器上的版本则只需要：

```
git pull
```

将某个branch合并到当前的branch则是：

```
git merge <branch>
```

需要注意的是前面两个操作中因为同一个文件更改的内容不相同都可能出现*conflicts*，这个时候需要手动解决它们，在之后用`git add`添加这些文件。在合并之前也可以用`git diff <branch> <另一个branch>`来预览*conflicts*。

## 其它一些有用的命令

查看log：

```
git log
```

添加人类看的版本号：

```
git tag 1.0.0 <commit id的前十位>
```

如果不知所措的话记得用`git status`来查看当前的状态，往往可以提供一些有用的信息（可能存在的conflicts、当前的branch等）。

## 最后再说一句

虽然介绍了这么多git命令行的使用，但是自己一个很大的感悟就是git还是图形界面好用，各种版本、改动一目了然，也没有命令行时各种重复的操作。这也算是一开始接触到命令行的狂热劲过了之后让自己重新理性思考的契机吧，命令行的确在很多时候能带给我们很大的效率提升，但是也绝不是万能的，GUI始终有它无法取代的优势，迷信CLI有一些迂腐的感觉。

顺便，[GitKraken](https://www.gitkraken.com/)的主页好酷啊，本体用起来也绝不会不比命令行酷。